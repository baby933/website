"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7862],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=a.createContext({}),c=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=c(e.components);return a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=o,k=d["".concat(p,".").concat(m)]||d[m]||u[m]||r;return n?a.createElement(k,i(i({ref:t},s),{},{components:n})):a.createElement(k,i({ref:t},s))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3508:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=n(7462),o=(n(7294),n(3905));const r={},i="Create a Voice Application",l={unversionedId:"getting_started/create_a_voice_application",id:"getting_started/create_a_voice_application",title:"Create a Voice Application",description:"A Programmable Voice Application is a server that takes control of the flow in a call. A Voice Application can use any combination of the following verbs:",source:"@site/docs/getting_started/create_a_voice_application.md",sourceDirName:"getting_started",slug:"/getting_started/create_a_voice_application",permalink:"/website/docs/getting_started/create_a_voice_application",draft:!1,editUrl:"https://github.com/fonoster/website/edit/main/docs/docs/getting_started/create_a_voice_application.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Create a Project",permalink:"/website/docs/getting_started/create_a_project"},next:{title:"Configure a Number",permalink:"/website/docs/getting_started/configure_a_number"}},p={},c=[{value:"Using Ngrok to publish your Voice Application",id:"using-ngrok-to-publish-your-voice-application",level:2}],s={toc:c};function u(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"create-a-voice-application"},"Create a Voice Application"),(0,o.kt)("p",null,"A Programmable Voice Application is a server that takes control of the flow in a call. A Voice Application can use any combination of the following verbs:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Answer")," - Accepts an incoming call"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Hangup")," - Closes the call"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Play")," - Takes an URL or file and streams the sound back to the calling party"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Say")," - Takes a text, synthesizes the text into audio, and streams back the result"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Gather")," - Waits for DTMF or speech events and returns back the result"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"SGather")," - Returns a stream for future DTMF and speech results"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Dial")," - Passes the call to an Agent or a Number at the PSTN"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Record")," - It records the voice of the calling party and saves the audio on the Storage sub-system"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Mute")," - It tells the channel to stop sending media, effectively muting the channel"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Unmute")," - It tells the channel to allow media flow")),(0,o.kt)("p",null,"Perform the following steps to create a Voice Application:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none"},"1. Open a new terminal\n2. Create a new folder\n3. Initiate a node application\n4. Create the file index.js, add the application's content, save the file\n5. Install the voice module\n6. Run the application\n")),(0,o.kt)("video",{width:"100%",playsInline:"",controls:"muted"},(0,o.kt)("source",{src:"../../videos/create_a_voice_application_1.mov",type:"video/mp4",playsInline:""})),(0,o.kt)("p",null,"First, create an empty NodeJS project with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir voiceapp\ncd voiceapp\nnpm init # and follow the wizard\n")),(0,o.kt)("p",null,"Then, with your favorite IDE create a file ",(0,o.kt)("inlineCode",{parentName:"p"},"index.js")," with the following content:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},'const { VoiceServer } = require("@fonoster/voice");\n\nconst serverConfig = {\n  pathToFiles: `${process.cwd()}/sounds`,\n};\n\nnew VoiceServer(serverConfig).listen(\n  async (req, res) => {\n    console.log(req);\n    await res.answer();\n    await res.play(`sound:${req.selfEndpoint}/sounds/hello-world.sln16`);\n    await res.hangup();\n  }\n);\n')),(0,o.kt)("p",null,"Next, install the Voice module with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"npm install @fonoster/voice\n")),(0,o.kt)("p",null,"Finally, launch the Voice Application with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"node index.js\n")),(0,o.kt)("p",null,"Your output will look like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ node index.js \ninfo: initializing voice server\ninfo: starting voice server @ 0.0.0.0, port=3000, path=/voiceapp\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Your app will live at ",(0,o.kt)("inlineCode",{parentName:"p"},"http://127.0.0.1:3000"),". \u26a0\ufe0f Be sure to leave the server up!")),(0,o.kt)("h2",{id:"using-ngrok-to-publish-your-voice-application"},"Using Ngrok to publish your Voice Application"),(0,o.kt)("p",null,"Now that we have the Voice Application up and running, you need to make it available on the Internet. The fastest way to enable public access is by using Ngrok. For example, with Ngrok, you can publish a web server with a single command."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-none"},"1. Open a new terminal\n2. Start Ngrok with the application's protocol/port\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Remember to keep your application running")),(0,o.kt)("video",{width:"100%",playsInline:"",controls:"muted"},(0,o.kt)("source",{src:"../../videos/create_a_voice_application_2.mov",type:"video/mp4",playsInline:""})),(0,o.kt)("p",null,"Run Ngrok, in your console, with the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"ngrok http 3000\n")),(0,o.kt)("p",null,"Now you can use Ngrok's URL as the webhook on any of your Fonoster Numbers."))}u.isMDXComponent=!0}}]);