<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://learn.fonoster.dev/blog</id>
    <title>Fonoster Blog</title>
    <updated>2022-10-03T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://learn.fonoster.dev/blog"/>
    <subtitle>Fonoster Blog</subtitle>
    <icon>https://learn.fonoster.dev/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[The essentials of building Voice Applications with Fonoster]]></title>
        <id>The essentials of building Voice Applications with Fonoster</id>
        <link href="https://learn.fonoster.dev/blog/The essentials of building Voice Applications with Fonoster"/>
        <updated>2022-10-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The purpose of this tutorial is to show the basics of Fonoster. Here you will find how to create a Voice Application, add a Number, and then use that Number to originate a call. Please follow the guide in sequence, as each step builds on the last one.]]></summary>
        <content type="html"><![CDATA[<p>The purpose of this tutorial is to show the basics of Fonoster. Here you will find how to create a Voice Application, add a Number, and then use that Number to originate a call. Please follow the guide in sequence, as each step builds on the last one.</p><h1>Requirements</h1><p>Before you start this guide, you will need the following:</p><ul><li>A set of credentials from <a href="https://console.fonoster.io/" target="_blank" rel="noopener noreferrer">here</a> ðŸ‘ˆ</li><li>An account for access to a SIP Service Provider (For US and Canada, we recommend <a href="https://voip.ms/residential" target="_blank" rel="noopener noreferrer">voip.ms</a>)</li><li>NodeJS 14+ (Use nvm if possible)</li><li>Fonoster command-line tool install with <code>npm install -g @fonoster/ctl</code></li><li>Ngrok <code>install with npm install -g ngrok</code></li></ul><p>You can login to the server with:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">fonoster auth:login</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And your output will be similar to:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">Access your Fonoster infrastructure</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Press ^C at any time to quit.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? api endpoint api.fonoster.io</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? access key id psanders</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? access key token *************************...</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? ready? Yes</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Accessing endpoint api.fonoster.io... Done</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then, set the default Project: </p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain"># Get the PROJECT_ID of the project using the 'projects:list' command </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">fonoster projects:use ${PROJECT_ID}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Creating a basic Voice Application</h1><p>A Voice Application is a server that takes control of the flow of a call. </p><p>A Voice Application can use any combination of the following verbs:</p><ul><li><code>Answer</code> - Accepts the call</li><li><code>Hangup</code> - Closes the call</li><li><code>Play</code> - It takes an URL or file and streams the sound back to the calling part</li><li><code>Say</code> - It takes a text, synthesizes the text into audio, and streams the result</li><li><code>Gather</code> - It waits for DTMF events and returns back the result</li><li><code>SGather</code> - It listen for a stream DTMF events and returns back the result</li><li><code>Record</code> - It records the voice of the calling party and saves the audio on the Storage sub-system</li><li><code>Mute</code> - It tells the channel to stop sending media, thus effectively muting the channel</li><li><code>Unmute</code> - It tells the channel to allow media flow</li></ul><p>To create a Voice Application perform the following steps.</p><p>First, clone the NodeJS example template as follows:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">git clone https://github.com/fonoster/nodejs-voiceapp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next, install the dependencies:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">cd nodejs-voiceapp</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">npm install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, launch the Voice Application with:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">npm start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Your output will look like this:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">info: initializing voice server</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">info: starting voice server on @ 0.0.0.0, port=3000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Your app will live at <code>http://127.0.0.1:3000.</code> Be sure to leave the server up!</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-ngrok-to-publish-your-voice-application">Using Ngrok to publish your Voice Application<a class="hash-link" href="#using-ngrok-to-publish-your-voice-application" title="Direct link to heading">â€‹</a></h2><p>Now that we have our Voice Application up and running, we need to make it available on the Internetâ€”â€”the fastest way to enable public access by using Ngrok. </p><p>For example, with ngrok, you can publish a web server with a single command.</p><p>On a new console, run Ngrok with the following command:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">ngrok http 3000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output will look like this:</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/80093500/193677206-08190c5d-b1b1-4358-bd32-4b7d62dd99ef.png" alt="ngrok_output" class="img_ev3q"></p><p>Leave this service running, and save the Forwarding URL for use in the next step.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="building-a-sip-network">Building a SIP Network<a class="hash-link" href="#building-a-sip-network" title="Direct link to heading">â€‹</a></h2><p>A SIP Network has all the building blocks needed to establish communication between two SIP endpoints (i.e., softphone, webphone, cellphone, the PSTN, etc.) We want to configure a Number and route the calls to our Voice Application on this guide.</p><p>Let's start by creating a SIP Service Provider.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-sip-service-provider">Adding a SIP Service Provider<a class="hash-link" href="#adding-a-sip-service-provider" title="Direct link to heading">â€‹</a></h2><p>A SIP Service Provider is an organization that will terminate your calls to the phone network (or PSTN). </p><p>You will need the <code>username</code>, <code>password</code>, and <code>host</code> you obtained from your SIP Service Provider for this section.</p><p>Create a new provider with:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">fonoster providers:create</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output will look similar to this:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">This utility will help you create a new Provider</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Press ^C at any time to quit.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? friendly name VOIPMS</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? username 215706</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? secret [hidden]</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? host newyork1.voip.ms</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? transport tcp</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? expire 300</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? ready? Yes</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Creating provider YourServiceProvider... Done</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="adding-a-sip-number">Adding a SIP Number<a class="hash-link" href="#adding-a-sip-number" title="Direct link to heading">â€‹</a></h2><p>A Number, often referred to as DID/DOD, is a number managed by your SIP Service provider.</p><blockquote><p>If your Provider doesn't accept E164, you can append the <code>--ignore-e164-validation</code></p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">fonoster numbers:create --ignore-e164-validation</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></blockquote><p>Here is an example of the output:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">This utility will help you create a new Number</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Press ^C at any time to quit.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? number in E.164 format (e.g. +16471234567) 9842753574    </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? service provider VOIPMS</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? aor link (leave empty)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? webhook https://5a2d2ea5d84d.ngrok.io # Replace with the value you obtained from Ngrok</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? ready? Yes</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Creating number +17853178071... KyjgGEkasj</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p> Be sure to replace the information with what was given to you by your Provider.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-sip-domain">Creating a SIP Domain<a class="hash-link" href="#creating-a-sip-domain" title="Direct link to heading">â€‹</a></h2><p>A SIP Domain is a space within the SIP Network where SIP entities live (usually SIP Agents). To create a SIP Domain, you can use the command-line tool or the SDK.</p><p>In this step, you need to select the Number you just created as your <code>Egreess Number</code>. Also, make sure to use an "unclaimed" <code>uri</code> or you will receive this error: "â€º Error: This Domain already exists."</p><p>Create a new Domain with:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">fonoster domains:create</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Your output will look similar to this:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">This utility will help you create a new Domain</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Press ^C at any time to quit.</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? friendly name Acme Corp</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? domain uri (e.g acme.com) sip.acme.com</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? egress number none</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? egress rule .*</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">? ready? Yes</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Creating domain Acme Corp... Jny9B_qaIh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>In the demo server, you don't need to own the Domain. Any available URI is fair game!</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-the-api-to-make-a-call">Using the API to make a call<a class="hash-link" href="#using-the-api-to-make-a-call" title="Direct link to heading">â€‹</a></h2><p>To make a call, you need install the SDK.</p><p>Install the SDK, from within the <code>voiceapp</code>, with:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">npm install --save @fonoster/sdk </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next, create the script <code>call.js</code> with the following code:</p><div class="language-none codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#9CDCFE;--prism-background-color:#2a2a2a"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-none codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// This will load the SDK and reuse your Fonoster credentials</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">const Fonoster = require("@fonoster/sdk");</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">const callManager = new Fonoster.CallManager();</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// Few notes:</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">//  1. Update the from to look exactly as the Number you added </span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">//  2. Use an active phone or mobile</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">//  3. Replace the webhook with the one from your Ngrok</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">callManager.call({</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> from: "9842753574",</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> to: "17853178070",</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> webhook: "https://5a2d2ea5d84d.ngrok.io",</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"> ignoreE164Validation: true</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">})</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">.then(console.log)</span><br></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">.catch(console.error);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, run your script with: <code>node call.js</code></p><p>If everything goes well, you will start seeing the output in the console you are running your Voice Application. You will also receive a call that will stream a "Hello World," which further confirms that everything is behaving as it should.</p><p><img loading="lazy" src="https://user-images.githubusercontent.com/80093500/193678241-8be38da0-cb54-4b25-a4d3-7842a94baa00.png" alt="call_request" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">â€‹</a></h3><ol><li>Are you not receiving the call at all?
The first thing to check is that your SIP Service Provider configuration is correct. Next, double-check the <code>username</code>, <code>password</code>, and <code>host</code>. If your Provider has an Admin console, check if you can see the registration from Fonoster.</li></ol><p>Next, make sure the <code>from</code> matches the Number given to you by your Provider.
Also, double-check the <code>to</code> has the correct prefix (for example, +1, etc.).</p><ol start="2"><li>You receive the call but immediately hang up (did not hear a sound)
First, verify that Ngrok is still running. Next, compare Ngrok's URL with the webhook on your Number. They both need to match!</li></ol><p>Then observe the console's output where your Voice Application is running, and see if there are any errors.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="giving-feedback-to-team-fonoster">Giving feedback to Team Fonoster<a class="hash-link" href="#giving-feedback-to-team-fonoster" title="Direct link to heading">â€‹</a></h4><p>We want to provide you with the best possible experience. To do that, we need your valuable feedback. Because we know you are busy, we provide two ways to get quick feedback from you. From the command line, use the <code>fonoster bug</code> command to start a GitHub issue. Or, you can use the <code>fonoster feedback</code> command to complete a short survey (which takes less than 30 seconds).</p>]]></content>
        <author>
            <name>Pedro Sanders</name>
            <uri>https://github.com/psanders</uri>
        </author>
        <category label="fonoster" term="fonoster"/>
        <category label="voice" term="voice"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Welcome]]></title>
        <id>welcome</id>
        <link href="https://learn.fonoster.dev/blog/welcome"/>
        <updated>2021-12-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Docusaurus blogging features are powered by the blog plugin.]]></summary>
        <content type="html"><![CDATA[<p><a href="https://docusaurus.io/docs/blog" target="_blank" rel="noopener noreferrer">Docusaurus blogging features</a> are powered by the <a href="https://docusaurus.io/docs/api/plugins/@docusaurus/plugin-content-blog" target="_blank" rel="noopener noreferrer">blog plugin</a>.</p><p>Simply add Markdown files (or folders) to the <code>blog</code> directory.</p><p>Regular blog authors can be added to <code>authors.yml</code>.</p><p>The blog post date can be extracted from filenames, such as:</p><ul><li><code>2019-05-30-welcome.md</code></li><li><code>2019-05-30-welcome/index.md</code></li></ul><p>A blog post folder can be convenient to co-locate blog post images:</p><p><img loading="lazy" alt="Docusaurus Plushie" src="/assets/images/docusaurus-plushie-banner-a60f7593abca1e3eef26a9afa244e4fb.jpeg" width="1500" height="500" class="img_ev3q"></p><p>The blog supports tags as well!</p><p><strong>And if you don't want a blog</strong>: just delete this directory, and use <code>blog: false</code> in your Docusaurus config.</p>]]></content>
        <author>
            <name>Pedro Sanders</name>
            <uri>https://github.com/psanders</uri>
        </author>
        <category label="fonoster" term="fonoster"/>
        <category label="voice" term="voice"/>
    </entry>
</feed>